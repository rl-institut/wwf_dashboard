<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% if password %}
      <script type="text/javascript">
        var s = "";
        const pw = "{{password}}";
        while (s != pw) {
          s = prompt("Bitte Passwort eingeben");
          if (s != pw) {
            alert("Falsches Passwort - bitte versuch es erneut!");
          }
        }
       </script>
    {% endif %}
    <link href="static/libs/bootstrap.min.css" rel="stylesheet">
    <link href="static/libs/bootstrap-datepicker.min.css" rel="stylesheet">
    <link rel="stylesheet" href="static/css/styling.min.css">
    <link rel="stylesheet" href="static/libs/ion.rangeSlider.min.css">
    <title>WWF Dashboard</title>
  </head>

  <body>
    <section class="dashboard">
      <a id="download" href="" download="wwf_share.png" hidden></a>
      <div class="dashboard__maxwidth">
        {% block tiles_html %}
        {% endblock tiles_html %}
      </div>
    </section>
    <script type="text/javascript" src="https://www.wwf.de/typo3conf/ext/bra_projectfiles/Resources/Public/Frontend/assets/static/iframe-resize/iframe-resizer.js"></script>
    <script type="text/javascript">
      window.iFrameResizer = {
        onReady: function () {
          if ('parentIFrame' in window) {
            const pageInfo = parentIFrame.getPageInfo(function (pageInfo) {
              let modalTop = (pageInfo.scrollTop - pageInfo.offsetTop) + 100;
              let modalHeight = pageInfo.clientHeight;
              let modals = document.querySelectorAll('.modal');
              for (let modal of modals ) {
                modalTop <= 0 ? modal.style.top = 0 : modal.style.top = `${modalTop}px`;
              }
              let modalContents = document.querySelectorAll('.modal-content');
              for (let modalContent of modalContents ) {
                modalContent.style.height = `${modalHeight}px`;
              }
            });
          }
        }
      };
    </script>
    <script src="static/libs/d3.min.js" type="text/javascript"></script>
    <script src="static/libs/bootstrap.min.js" type="text/javascript"></script>
    <script src="static/libs/jquery.min.js" type="text/javascript"></script>
    <script src="static/libs/ion.rangeSlider.min.js" type="text/javascript"></script>
    <script src="static/libs/bootstrap-datepicker.min.js" type="text/javascript"></script>

    <script>
      var icon_names = {{icons|safe}};
      var flags = {{flags|safe}};
      {% if initials %}
        const initials = {{initials|safe}};
      {% else %}
        const initials = {};
      {% endif %}
    </script>
    <script src="static/js/global.js"></script>
    {% block tiles_js %}
    {% endblock tiles_js %}
  </body>
</html>
